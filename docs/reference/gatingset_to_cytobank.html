<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert a GatingSet to a Cytobank-compatible gatingML — gatingset_to_cytobank • CytoML</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Convert a GatingSet to a Cytobank-compatible gatingML — gatingset_to_cytobank" />

<meta property="og:description" content="this function retrieves the gates from GatingSet and writes a customed GatingML-2.0 file
that can be imported into cytobank." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CytoML</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.9.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/HowToExportGatingSet.html">How to export a GatingSet to GatingML</a>
    </li>
    <li>
      <a href="../articles/cytobank2GatingSet.html">How to import Cytobank into a GatingSet</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/RGLab/CytoML">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert a GatingSet to a Cytobank-compatible gatingML</h1>
    <small class="dont-index">Source: <a href='https://github.com/RGLab/CytoML/blob/master/R/GatingSet2cytobank.R'><code>R/GatingSet2cytobank.R</code></a></small>
    <div class="hidden name"><code>gatingset_to_cytobank.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>this function retrieves the gates from GatingSet and writes a customed GatingML-2.0 file
that can be imported into cytobank.</p>
    
    </div>

    <pre class="usage"><span class='fu'>gatingset_to_cytobank</span>(<span class='no'>gs</span>, <span class='no'>outFile</span>, <span class='kw'>showHidden</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>cytobank.default.scale</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>gs</th>
      <td><p>a GatingSet object</p></td>
    </tr>
    <tr>
      <th>outFile</th>
      <td><p>a file name</p></td>
    </tr>
    <tr>
      <th>showHidden</th>
      <td><p>whether to include the hidden population nodes in the output</p></td>
    </tr>
    <tr>
      <th>cytobank.default.scale</th>
      <td><p>logical flag indicating whether to use the default Cytobank asinhtGml2 settings.
Currently it should be set to TRUE in order for gates to be displayed properly in Cytobank
because cytobank currently does not parse the global scale settings from GatingML.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>rescale.gate default is TRUE. which means the gate is rescaled to the new scale that is understandable by cytobank.
It is recommended not to change this behavior unless user wants to export to a gatingML file used for other purpose other
than being imported into cytobank.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>nothing</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The process can be divided into four steps:
1. Read in gate geometry, compensation and transformation from gatingSet
2. Rescale gate boundaries with flowjo_biexp() so gates can be displayed properly in Cytobank
3. Save gates and hierarchy structure to R environment
4. Write environment out to gatingML using write.GatingML()</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>flowWorkspace</span>)</div><div class='output co'>#&gt; <span class='message'>As part of improvements to flowWorkspace, some behavior of</span>
#&gt; <span class='message'>GatingSet objects has changed. For details, please read the section</span>
#&gt; <span class='message'>titled "The cytoframe and cytoset classes" in the package vignette:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>  vignette("flowWorkspace-Introduction", "flowWorkspace")</span></div><div class='input'>
<span class='no'>dataDir</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"extdata"</span>,<span class='kw'>package</span><span class='kw'>=</span><span class='st'>"flowWorkspaceData"</span>)
<span class='no'>gs</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/flowWorkspace/man/save_gs.html'>load_gs</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span>(<span class='no'>dataDir</span>, <span class='kw'>pattern</span> <span class='kw'>=</span> <span class='st'>"gs_manual"</span>,<span class='kw'>full</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))

<span class='fu'><a href='https://rdrr.io/pkg/flowWorkspace/man/gs_pop_add.html'>gs_pop_remove</a></span>(<span class='no'>gs</span>, <span class='st'>"CD8"</span>)

<span class='co'>#output to cytobank</span>
<span class='no'>outFile</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span>(<span class='kw'>fileext</span> <span class='kw'>=</span> <span class='st'>".xml"</span>)
<span class='fu'>gatingset_to_cytobank</span>(<span class='no'>gs</span>, <span class='no'>outFile</span>) <span class='co'>#type by default is 'cytobank'</span></div><div class='output co'>#&gt; <span class='warning'>Warning: With 'cytobank.default.scale' set to 'TRUE', data and gates will be re-transformed with cytobank's default scaling settings, which may affect how gates look like.</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gatingmissing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; <span class='warning'>Warning: missing namespace definitions for prefix(es) gating</span></div><div class='output co'>#&gt; [1] "/tmp/RtmpSUYVT7/file6b4e3b25a4e0.xml"</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Mike Jiang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


